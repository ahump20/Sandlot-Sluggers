name = "mmi-engine"
main = "worker-mmi-engine.js"
compatibility_date = "2024-11-21"

# D1 Database binding (will be populated by deploy script)
[[d1_databases]]
binding = "MMI_DB"
database_name = "mmi-database-prod"
database_id = "" # Populated by deploy-mmi.sh

# KV namespace binding (for caching)
[[kv_namespaces]]
binding = "MMI_KV"
id = "" # Populated by deploy-mmi.sh

# Routes for blazesportsintel.com
[[routes]]
pattern = "blazesportsintel.com/mmi/*"
zone_name = "blazesportsintel.com"

[[routes]]
pattern = "www.blazesportsintel.com/mmi/*"
zone_name = "blazesportsintel.com"

# Development environment
[env.dev]
name = "mmi-engine-dev"

[[env.dev.d1_databases]]
binding = "MMI_DB"
database_name = "mmi-database-dev"
database_id = "" # Populated by deploy script

[[env.dev.kv_namespaces]]
binding = "MMI_KV"
id = "" # Populated by deploy script

# Production environment
[env.prod]
name = "mmi-engine-prod"

[[env.prod.d1_databases]]
binding = "MMI_DB"
database_name = "mmi-database-prod"
database_id = "" # Populated by deploy script

[[env.prod.kv_namespaces]]
binding = "MMI_KV"
id = "" # Populated by deploy script

# Observability
[observability]
enabled = true

# Deployment configuration
[build]
command = ""

[build.upload]
format = "service-worker"
